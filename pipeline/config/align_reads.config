singularity {

  enabled = true
  autoMounts = true
  cacheDir = 'work/00-containers'

}

process {

  executor = 'slurm'

  withName: 'align_reads' {
    clusterOptions = '--account=nn10082k --partition=a100 --gpus=2 --job-name=align_reads'
    container = 'nvcr.io/nvidia/clara/clara-parabricks:4.5.0-1'
    containerOptions = '--nv'
    cpus = 4
    time = '06:00:00'
  }
  
  withName: 'calc_coverage' {
    clusterOptions = '--account=nn10082k --job-name=calc_coverage'
    container = 'quay.io/biocontainers/samtools:1.17--hd87286a_1'
    cpus = 1
    memory = '1 GB'
    time = '01:00:00'
  }

}
