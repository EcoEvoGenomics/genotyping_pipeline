singularity {

  enabled = true
  autoMounts = true
  cacheDir = 'work/00-containers'

}

process {

  executor = 'slurm'

  withName: 'align_gpu' {
    clusterOptions = '--account=nn10082k --partition=a100 --gpus=1 --job-name=align_gpu'
    container = 'nvcr.io/nvidia/clara/clara-parabricks:4.5.0-1'
    containerOptions = '--nv'
    cpus = 1
    memory = '12 GB'
    time = '01:00:00'
  }

  withName: 'cram_downsample' {
    clusterOptions = '--account=nn10082k --job-name=cram_downsample'
    container = 'quay.io/biocontainers/samtools:1.17--hd87286a_1'
    cpus = 1
    memory = '12 GB'
    time = '12:00:00'
  }

  withName: 'calc_stats' {
    clusterOptions = '--account=nn10082k --job-name=calc_stats'
    container = 'quay.io/biocontainers/samtools:1.17--hd87286a_1'
    cpus = 2
    memory = '2 GB'
    time = '01:00:00'
  }

}
