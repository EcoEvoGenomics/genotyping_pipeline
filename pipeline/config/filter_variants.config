singularity {

  enabled = true
  autoMounts = true
  cacheDir = 'work/00-containers'

}

process {

  executor='slurm'

  withName: 'filter_vcf' {
    clusterOptions = '--account=nn10082k --job-name=filter'
    // Container: https://wave.seqera.io/view/builds/bd-124ebbc402fc7b22_1
    container = 'community.wave.seqera.io/library/bcftools_vcftools:124ebbc402fc7b22'
    cpus = 4
    memory = '12 GB'
    time = '12:00:00'
  }

  withName: 'summarise_vcf' {
    clusterOptions = '--account=nn10082k --job-name=summarise'
    container = 'quay.io/biocontainers/bcftools:1.17--h3cc50cf_1'
    cpus = 4
    memory = '10 GB'
    time = '12:00:00'
  }
  
  withName: 'concatenate_vchks' {
    clusterOptions = '--account=nn10082k --job-name=cat_vchk'
    container = 'quay.io/biocontainers/bcftools:1.17--h3cc50cf_1'
    cpus = 1
    memory = '2 GB'
    time = '01:00:00'
  }

  withName: 'concatenate_vcfs' {
    clusterOptions = '--account=nn10082k --job-name=cat_vcf'
    container = 'quay.io/biocontainers/bcftools:1.17--h3cc50cf_1'
    cpus = 8
    memory = '12 GB'
    time = '02:00:00'
  }
  
  withName: 'save_filters_to_file' {
    clusterOptions = '--account=nn10082k --job-name=save_filters'
    cpus = 1
    memory = '256 MB'
    time = '00:05:00'
  }

}
