singularity {

  enabled = true
  autoMounts = true
  cacheDir = 'work/00-containers'

}

process {

  executor = 'slurm'

  withName: 'parse_sample' {
    clusterOptions = '--account=nn10082k --job-name=parse_sample'
    container = 'quay.io/biocontainers/seqkit:2.10.0--h9ee0642_0'
    cpus = 2
    memory = '8 GB'
    time = '01:00:00'
  }

  withName: 'deduplicate_reads' {
    clusterOptions = '--account=nn10082k --job-name=dedup_reads'
    container = 'quay.io/biocontainers/seqkit:2.10.0--h9ee0642_0'
    cpus = 2
    memory = '8 GB'
    time = '01:00:00'
  }

  withName: 'downsample_reads' {
    clusterOptions = '--account=nn10082k --job-name=downsample_reads'
    container = 'quay.io/biocontainers/seqkit:2.10.0--h9ee0642_0'
    cpus = 2
    memory = '8 GB'
    time = '01:00:00'
  }

  withName: 'trim_reads' {
    clusterOptions = '--account=nn10082k --job-name=trim_reads'
    container = 'quay.io/biocontainers/fastp:0.24.0--heae3180_1'
    cpus = 4
    memory = '8 GB'
    time = '02:00:00'
  }

}
